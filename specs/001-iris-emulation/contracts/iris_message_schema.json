{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://instance.iris-emulation/schemas/iris-message.v1.json",
  "title": "IRISMessage",
  "description": "Schema for InterSystems IRIS messages.log entry",
  "type": "object",
  "properties": {
    "timestamp": {
      "type": "string",
      "description": "IRIS format timestamp MM/DD/YY-HH:MM:SS:mmm",
      "pattern": "^\\d{2}/\\d{2}/\\d{2}-\\d{2}:\\d{2}:\\d{2}:\\d{3}$",
      "examples": ["11/14/25-09:45:55:657", "02/05/26-14:23:45:123"]
    },
    "process_id": {
      "type": "integer",
      "description": "Unix process ID of IRIS daemon",
      "minimum": 1,
      "maximum": 999999,
      "examples": [50745, 50803]
    },
    "severity": {
      "type": "integer",
      "description": "Error severity level",
      "enum": [0, 1, 2, 3],
      "examples": [0],
      "x-enum-descriptions": {
        "0": "Info",
        "1": "Warning",
        "2": "Error",
        "3": "Severe"
      }
    },
    "category": {
      "type": "string",
      "description": "IRIS message category (dot-separated hierarchy)",
      "pattern": "^[A-Za-z]+(\\.[A-Za-z]+)*$",
      "examples": [
        "Generic.Event",
        "Database.MountedRW",
        "WriteDaemon.Started",
        "Crypto.IntelSandyBridgeAESNI"
      ]
    },
    "message_text": {
      "type": "string",
      "description": "Human-readable message content",
      "minLength": 1,
      "maxLength": 500,
      "examples": [
        "Allocated 504MB shared memory using Huge Pages",
        "Kerberos authentication unavailable: Error opening Kerberos library"
      ]
    },
    "generated_at": {
      "type": "string",
      "description": "ISO 8601 timestamp when message was generated by Instance",
      "format": "date-time",
      "examples": ["2026-02-05T14:23:45.123456Z"]
    },
    "trace_id": {
      "type": "string",
      "description": "OpenTelemetry format trace ID (128-bit hex)",
      "pattern": "^[a-f0-9]{32}$",
      "examples": ["a1b2c3d4e5f6789012345678901234ab"]
    }
  },
  "required": [
    "timestamp",
    "process_id",
    "severity",
    "category",
    "message_text",
    "generated_at",
    "trace_id"
  ],
  "additionalProperties": false,
  "examples": [
    {
      "timestamp": "11/14/25-09:45:57:762",
      "process_id": 50803,
      "severity": 2,
      "category": "Generic.Event",
      "message_text": "Kerberos authentication unavailable: Error opening Kerberos library",
      "generated_at": "2026-02-05T14:23:45.123456Z",
      "trace_id": "a1b2c3d4e5f6789012345678901234ab"
    }
  ]
}
